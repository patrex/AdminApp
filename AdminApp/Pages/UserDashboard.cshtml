@page
@model AdminApp.Pages.UserDashboardModel
@{
    ViewData["Title"] = "UserDashboard";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<br />

<div class="container row">
    <div class="col-9">
        <h2 class="text-info">Hello, @Model.CurrentUser.ToString</h2>
    </div>

    <div class="col-2">
        <a asp-page="ReqItem" asp-route-id="@Model.CurrentUser.eMail" class="btn btn-info form-control text-white">Request</a>
    </div>

    <div class="col-1">
        <a asp-page="Logout" asp-route-id="@Model.CurrentUser.eMail" class="btn btn-sm btn-info form-control text-white">Logout</a>
    </div>

    <br />
    <div class="col-12 border p-3 mt-3">
        @if (Model.MyRequests.Count() > 0)
        {

            <table class="table table-striped table-success border">
                <tr class="table-secondary">
                    <th>
                        <label asp-for="MyRequests.FirstOrDefault().Item">Request</label>
                    </th>

                    <th>
                        <label asp-for="MyRequests.FirstOrDefault().QuantityRequested">Amount</label>
                    </th>

                    <th>
                        <label asp-for="MyRequests.FirstOrDefault().DateRequested">Date Requested</label>
                    </th>

                    <th>
                        <label>Actions</label>
                    </th>
                </tr>

                @foreach (var request in Model.MyRequests)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(m => request.Item)
                        </td>

                        <td>
                            @Html.DisplayFor(m => request.QuantityRequested)
                        </td>

                        <td>
                            @Html.DisplayFor(m => request.DateRequested)
                        </td>


                        <td>
                            @if (!request.IsApproved)
                            {
                                <a class="fa fa-trash text-danger" aria-hidden="true" asp-route-id="@request.RequestId"></a>
                            }
                            else
                            {
                                <i class="fa fa-trash text-black-50" aria-hidden="true" asp-route-id="@request.RequestId"></i>
                            }
                        </td>
                    </tr>
                }
            </table>
        }
        else
        {
            <p>You have not made any requests from the store yet</p>
        }
    </div>
</div>

