@page
@model AdminApp.Pages.IssueItemModel
@{
    ViewData["Title"] = "IssueItem";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}


<br />
<div class="container row">

    <div class="col-9">
        <h2 class="text-info">Issue Item</h2>
    </div>


    <div class="col-12 border p-3 mt-3">
        <form method="post">
        @if (Model.ApprovedRequests.Count() > 0)
        {
        <table class="table table-striped table-success border">
            <tr class="table-secondary">

                <th>
                    <label asp-for="ApprovedRequests.FirstOrDefault().UserRequesting">User</label>
                </th>

                <th>
                    <label asp-for="ApprovedRequests.FirstOrDefault().Item">Item</label>
                </th>

                <th>
                    <label asp-for="ApprovedRequests.FirstOrDefault().QuantityRequested">Number requested</label>
                </th>

                <th>
                    <label asp-for="ApprovedRequests.FirstOrDefault().DateRequested">Date requested</label>
                </th>

                <th>
                    <label>Actions</label>
                </th>
            </tr>

            @foreach (var request in Model.ApprovedRequests)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(m => request.UserRequesting)
                    </td>

                    <td>
                        @Html.DisplayFor(m => request.Item)
                    </td>

                     <td>
                        @Html.DisplayFor(m => request.QuantityRequested)
                    </td>

                    <td>
                        @Html.DisplayFor(m => request.DateRequested)
                    </td>

                    <td>
                        <button asp-route-reqid="@request.RequestId" asp-route-email="@Model.Issuer.eMail" class="btn btn-primary">Issue</button>
                    </td>
                </tr>
            }
        </table>
        }
        
        else { <p>No requests have been approved yet</p>}
        </form>

    </div>
</div>